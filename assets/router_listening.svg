<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="620px" preserveAspectRatio="none" style="width:814px;height:620px;" version="1.1" viewBox="0 0 814 620" width="814px" zoomAndPan="magnify"><defs><filter height="300%" id="f17k2enr5nrfgc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="141" x="335.5" y="26.708">Router listening</text><path d="M421,56.7422 L421,72.875 L401,76.875 L421,80.875 L421,97.0078 A0,0 0 0 0 421,97.0078 L802,97.0078 A0,0 0 0 0 802,97.0078 L802,66.7422 L792,56.7422 L421,56.7422 A0,0 0 0 0 421,56.7422 " fill="#FBFB77" filter="url(#f17k2enr5nrfgc)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M792,56.7422 L792,66.7422 L802,66.7422 L792,56.7422 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="427" y="73.8091">register subscribe_handle</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="90" x="427" y="88.9419">call back with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" text-decoration="underline" textLength="153" x="521" y="88.9419">confirm_navigation(url)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="678" y="88.9419">on requested_url</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="89.8438" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="161" x="240" y="31.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="250" y="53.0918">fn init</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="254" y="67.0605"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" text-decoration="underline" textLength="47" x="254" y="67.0605">router()</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="250" y="81.0293">.init(url)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="141" x="250" y="94.998">.subscribe(sub_handle)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="254" y="108.9668"/><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="240" x="200.5" y="141.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="220" x="210.5" y="162.9355">subs::UrlRequested(requested_url,_)</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="212" x="214.5" y="195.7656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="192" x="224.5" y="216.9043">router().confirm_navigation(url)</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="137" x="252" y="249.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="262" y="270.873">match router move</text><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="588.5" y1="303.7031" y2="303.7031"/><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="119" x="126.5" y="323.7031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="136.5" y="344.8418">navigate to next</text><polygon fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" points="168,377.6719,204,377.6719,216,389.6719,204,401.6719,168,401.6719,156,389.6719,168,377.6719" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="168" y="393.48">route?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="27" x="129" y="387.0776">exist</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="216" y="387.0776">not found</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="153" x="11" y="411.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="21" y="432.8105">current_route = route</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="201" x="184" y="411.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181" x="194" y="432.8105">current_route = default_route</text><polygon fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" points="186,451.6406,198,463.6406,186,475.6406,174,463.6406,186,451.6406" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="108" x="132" y="495.6406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="88" x="142" y="516.7793">update history</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="86" x="423" y="409.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="433" y="430.8105">move back</text><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="103" x="537" y="409.6719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="547" y="430.8105">move forward</text><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="588.5" y1="549.6094" y2="549.6094"/><rect fill="#FEFECE" filter="url(#f17k2enr5nrfgc)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="118" x="261.5" y="569.6094"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="271.5" y="590.748">router : is_ready</text><line style="stroke:#A80036;stroke-width:1.5;" x1="320.5" x2="320.5" y1="121.7969" y2="141.7969"/><polygon fill="#A80036" points="316.5,131.7969,320.5,141.7969,324.5,131.7969,320.5,135.7969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="320.5" x2="320.5" y1="175.7656" y2="195.7656"/><polygon fill="#A80036" points="316.5,185.7656,320.5,195.7656,324.5,185.7656,320.5,189.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="320.5" x2="320.5" y1="229.7344" y2="249.7344"/><polygon fill="#A80036" points="316.5,239.7344,320.5,249.7344,324.5,239.7344,320.5,243.7344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="156" x2="87.5" y1="389.6719" y2="389.6719"/><line style="stroke:#A80036;stroke-width:1.5;" x1="87.5" x2="87.5" y1="389.6719" y2="411.6719"/><polygon fill="#A80036" points="83.5,401.6719,87.5,411.6719,91.5,401.6719,87.5,405.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="216" x2="284.5" y1="389.6719" y2="389.6719"/><line style="stroke:#A80036;stroke-width:1.5;" x1="284.5" x2="284.5" y1="389.6719" y2="411.6719"/><polygon fill="#A80036" points="280.5,401.6719,284.5,411.6719,288.5,401.6719,284.5,405.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="87.5" x2="87.5" y1="445.6406" y2="463.6406"/><line style="stroke:#A80036;stroke-width:1.5;" x1="87.5" x2="174" y1="463.6406" y2="463.6406"/><polygon fill="#A80036" points="164,459.6406,174,463.6406,164,467.6406,168,463.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="284.5" x2="284.5" y1="445.6406" y2="463.6406"/><line style="stroke:#A80036;stroke-width:1.5;" x1="284.5" x2="198" y1="463.6406" y2="463.6406"/><polygon fill="#A80036" points="208,459.6406,198,463.6406,208,467.6406,204,463.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="186" y1="357.6719" y2="377.6719"/><polygon fill="#A80036" points="182,367.6719,186,377.6719,190,367.6719,186,371.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="186" y1="475.6406" y2="495.6406"/><polygon fill="#A80036" points="182,485.6406,186,495.6406,190,485.6406,186,489.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="186" y1="305.2031" y2="323.7031"/><polygon fill="#A80036" points="182,313.7031,186,323.7031,190,313.7031,186,317.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="466" x2="466" y1="305.2031" y2="409.6719"/><polygon fill="#A80036" points="462,399.6719,466,409.6719,470,399.6719,466,403.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="588.5" x2="588.5" y1="305.2031" y2="409.6719"/><polygon fill="#A80036" points="584.5,399.6719,588.5,409.6719,592.5,399.6719,588.5,403.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="186" x2="186" y1="529.6094" y2="549.6094"/><polygon fill="#A80036" points="182,539.6094,186,549.6094,190,539.6094,186,543.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="466" x2="466" y1="443.6406" y2="549.6094"/><polygon fill="#A80036" points="462,539.6094,466,549.6094,470,539.6094,466,543.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="588.5" x2="588.5" y1="443.6406" y2="549.6094"/><polygon fill="#A80036" points="584.5,539.6094,588.5,549.6094,592.5,539.6094,588.5,543.6094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="320.5" x2="320.5" y1="283.7031" y2="303.7031"/><polygon fill="#A80036" points="316.5,293.7031,320.5,303.7031,324.5,293.7031,320.5,297.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="320.5" x2="320.5" y1="551.1094" y2="569.6094"/><polygon fill="#A80036" points="316.5,559.6094,320.5,569.6094,324.5,559.6094,320.5,563.6094" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5aaada748a9381f87c3e04605a911140]
@startuml

title Router listening

:fn init
 __router() __
.init(url)
.subscribe(sub_handle)
;
note right
   register subscribe_handle
   //call back with __confirm_navigation(url)__// on requested_url
end note



:subs::UrlRequested(requested_url,_);
:router().confirm_navigation(url);
:match router move;

split
 :navigate to next;

if (route?) then (exist)
        :current_route = route;
    else (not found)
        :current_route = default_route;
    endif
    :update history;
split again
 :move back;
split again
 :move forward;
end split

:router : is_ready;
@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>